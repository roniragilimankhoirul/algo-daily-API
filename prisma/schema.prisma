generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String        @id @db.VarChar(100) @default(uuid())
  name      String        @db.VarChar(100)
  email     String        @unique @db.VarChar(100)
  password  String        @db.VarChar(100)
  photo_url String?       @db.Text
  attendances UserAttendance[]

  @@map(name: "users")
}

model Attendance {
  id        String        @id @db.VarChar(100) @default(uuid())
  attended  Boolean       @db.Boolean
  timestamp DateTime      @db.Timestamp @default(now())
  latitude  Float         @db.Real
  longitude Float         @db.Real
  reason    String        @db.Text
  users     UserAttendance[]

  @@map(name: "attendances")
}

model UserAttendance {
  user_id       String    @db.VarChar(100)
  attendance_id String    @db.VarChar(100)
  user          User      @relation(fields: [user_id], references: [id])
  attendance    Attendance @relation(fields: [attendance_id], references: [id])

  @@id([user_id, attendance_id])
  @@map(name: "user_attendances")
}
